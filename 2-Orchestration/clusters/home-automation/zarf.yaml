kind: ZarfPackageConfig
metadata:
  name: home-automation
  description: "Components comprising my home automation orchestration"
  version: 0.0.1
components:
  - name: istio-operator
    required: true
    manifests:
    - name: istio-operator-config
      namespace: gitops
      files:
        - configs/istio-operator/config.yaml
    - name: istio-namespace
      files:
        - configs/istio-operator/namespace.yaml
    charts:
      - name: flux-generics-istio-operator
        localPath: /Users/brandtkeller/repos/github/flux-generic-helm/chart
        namespace: gitops
        version: 0.0.1
        valuesFiles:
          - configs/istio-operator/flux.yaml
    repos:
      - https://repo1.dso.mil/big-bang/product/packages/istio-operator.git@1.17.2-bb.1
    images:
      - registry1.dso.mil/ironbank/opensource/istio/operator:1.17.2
  
  - name: istio-controlplane
    required: true
    manifests:
    - name: istio-config
      namespace: gitops
      files:
        - configs/istio/config.yaml
    - name: istio-namespace
      files:
        - configs/istio/namespace.yaml
    - name: istio-gateway-certs
      namespace: istio-system
      files:
        - home-gateway.yaml
    charts:
      - name: flux-generics-istio
        localPath: /Users/brandtkeller/repos/github/flux-generic-helm/chart
        namespace: gitops
        version: 0.0.1
        valuesFiles:
          - configs/istio/flux.yaml
    repos:
      - https://repo1.dso.mil/big-bang/product/packages/istio-controlplane.git@1.17.2-bb.1
    images:
      - registry1.dso.mil/ironbank/big-bang/base:2.0.0
      - registry1.dso.mil/ironbank/opensource/istio/pilot:1.17.2
      - registry1.dso.mil/ironbank/opensource/istio/proxyv2:1.17.2
      - registry1.dso.mil/ironbank/opensource/istio/install-cni:1.17.2
  # - name: home-assistant
  #   required: true
  #   charts:
  #     - name: home-assistant
  #       localPath: chart
  #       namespace: home-assistant
  #       version: 0.1.0
  #   images:
  #     - ghcr.io/home-assistant/home-assistant:2023.5.3
  #     - zwavejs/zwave-js-ui:8.16.1
  # - name: home-assistant-virtualservice